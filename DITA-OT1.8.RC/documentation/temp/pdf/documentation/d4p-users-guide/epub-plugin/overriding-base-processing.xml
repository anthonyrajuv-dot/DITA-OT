<?xml version="1.0" encoding="utf-8"?><?workdir /C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\temp\pdf\documentation\d4p-users-guide\epub-plugin?><?workdir-uri file:/C:/Users/PBentley/Downloads/dita4publishers-0.9.18/documentation/temp/pdf/documentation/d4p-users-guide/epub-plugin/?><?path2project ..\..\?><?path2project-uri ../../?><concept xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="conceptId" ditaarch:DITAArchVersion="1.2" domains="(topic hi-d)       (topic indexing-d)      (topic d4p_formatting-d)      (topic d4p_ruby-d)      a(props d4p_renditionTarget)      (topic d4p_classification-d)      (topic d4p_math-d)      (topic d4p_simplebib-d)      (topic d4p_variables-d)      (topic d4p_verse-d)      (topic xml-d)      (topic abbrev-d)     " class="- topic/topic concept/concept " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="concept:1;3:25">
 <title class="- topic/title " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="title:1;4:9">Implementing Overrides for Common Processing</title>
 <shortdesc class="- topic/shortdesc " xtrc="shortdesc:1;5:13" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml">You can use the same <parmname class="+ topic/keyword pr-d/parmname " xtrc="parmname:1;5:44" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml">args.xsl</parmname> parameter as for the XHTML transform to specify a custom top-level transform that includes overrides to the base processing.</shortdesc>
  <prolog class="- topic/prolog " xtrc="prolog:1;6:11" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml">
    <author class="- topic/author " xtrc="author:1;5:21" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide.ditamap">W. Eliot Kimber</author><metadata class="- topic/metadata " xtrc="metadata:1;7:15" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml">
      <keywords class="- topic/keywords " xtrc="keywords:1;8:17" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml">
        <indexterm class="- topic/indexterm " xtrc="indexterm:1;9:20" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml">overriding base processing</indexterm>
        <indexterm class="- topic/indexterm " xtrc="indexterm:2;10:20" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml"/>
      </keywords>
    <prodinfo class="- topic/prodinfo " xtrc="prodinfo:1;7:27" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide.ditamap">
    <prodname class="- topic/prodname " xtrc="prodname:1;8:15" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide.ditamap">DITA For Publishers</prodname>
    <vrmlist class="- topic/vrmlist " xtrc="vrmlist:1;9:14" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide.ditamap">
      <vrm class="- topic/vrm " version="0.9.16" xtrc="vrm:1;11:27" xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide.ditamap"/>
    </vrmlist>
    </prodinfo></metadata>
  </prolog>
 <conbody class="- topic/body  concept/conbody " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="conbody:1;14:11">
   <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:1;15:7">The Toolkit's XHTML transform provides a parameter, <parmname class="+ topic/keyword pr-d/parmname " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="parmname:2;15:69">args.xml</parmname>, by which you can specify the top-level XSLT transform to be used by the transformation type. You normally use this facility to apply overrides to the base processing provided by the transformation type.</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:2;16:8">Note that there is an important distinction between <i class="+ topic/ph hi-d/i " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="i:1;16:63">extending</i> a transformation type and <i class="+ topic/ph hi-d/i " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="i:2;16:106">overriding</i> a transformation type. Extensions are provided through Toolkit plugins that are integrated with the base transformation type and apply to all uses of that transformation type. For example, the DITA for Publishers formatting-d.html and formatting-d.fo Toolkit plugins extend the base XHTML and PDF transforms with support for the DITA for Publishers formatting domain elements. These extensions are used unconditionally by all invocations of the XHTML and PDF transformation types.</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:3;17:8">When you <i class="+ topic/ph hi-d/i " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="i:3;17:20">override</i> a transformation type you are changing the base processing for a specific invocation of the transformation type. Overrides are not integrated with the base transformation type. Rather, they are implemented as new top-level XSLT transforms that import the base transformation (e.g., dita2xhtml.xsl) and include or import custom XSLT code that extends or overrides the base processing.</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:4;18:8">You normally use overrides to achieve output results that are specific to a particular document, document type, or delivery target. For example, you might want to output specific topic-level metadata for a specific kind of publication or even for a specific single publication. When dealing with Publishing use cases, where every publication might have different requirements it is likely that you may need to implement publication-specific overrides to achieve some specific effect.</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:5;19:8">Note also that the general override strategy for HTML-based outputs like EPUB and Kindle is different from the override strategy for PDF output using the Toolkit's built-in PDF transformation type. The PDF transformation type has its own customization framework that provides a different way to apply overrides to the transformation (it also allows extension using integrated plugins).</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:6;20:8">You can override the EPUB and Kindle processing by creating a new top-level XSLT transformation that includes the base map2epub.xsl or map2kindle.xsl transforms provided by the respective Toolkit plugins and that also includes your custom XSLT transform that does whatever you need. Because the EPUB and Kindle transforms are both based on the XHTML transform you can normally use a single override file with the XHTML, EPUB, and Kindle transformation types.</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:7;21:8">The top-level transformation can be packaged as a separate Open Toolkit plugin that depends on, but does not integrate into, the base transformation type it extends. This is the best thing to do if you must distribute the extension to different systems. If the override will only be used on a single machine you can put the top-level transformation anywhere. However, in this case the top-level transformation will necessarily have system-specific URIs for the Toolkit-provided base transformations, which means it is not portable.</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:8;22:8">A typical "local" top-level transformation file looks like this:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="codeblock:1;22:83">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0"&gt;
  
  &lt;xsl:import href="/Applications/oxygen/frameworks/dita//DITA-OT/plugins/net.sourceforge.dita4publishers.epub/xsl/map2epub.xsl"/&gt;
  &lt;xsl:include href="my-html-overrides.xsl"/&gt;
  
&lt;/xsl:stylesheet&gt;</codeblock></p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:9;32:8">This example is a "local" override that uses an absolute URI to import the base transformation, in this case the EPUB <filepath class="+ topic/ph sw-d/filepath " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="filepath:1;32:136">map2epub.xsl</filepath> transform. It also includes the local overrides, here in the file <filepath class="+ topic/ph sw-d/filepath " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="filepath:2;32:236">my-html-overrides.xsl</filepath>. The corresponding transformation for the Kindle transformation type would include the Kindle-specific top-level transform and the same overrides (assuming that you want the EPUB and Kindle outputs to reflect the same overrides, which would normally be the case).</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:10;33:8">The overrides themselves can be anything you need and can override either the base XHTML processing from the dita2xhtml transformation type or can override the EPUB- and Kindle-specific processing from the EPUB or Kindle plugins. For most overrides you would be overriding the base XHTML processing.</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:11;34:8">To use the override transformation you simply specify the path and filename of the transformation as the value of the <parmname class="+ topic/keyword pr-d/parmname " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="parmname:3;34:136">args.xml</parmname> Ant parameter for the XHTML, EPUB, or Kindle transformation types. </p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:12;35:8">To package an override as a Toolkit plugin you create a <filepath class="+ topic/ph sw-d/filepath " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="filepath:3;35:74">plugin.xml</filepath> file that defines the plugin and use a relative URI to include the base transformation type, relative to the plugin's location as deployed in a Toolkit. You put the <filepath class="+ topic/ph sw-d/filepath " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="filepath:4;35:271">plugin.xml</filepath> and override transform into their own uniquely-named directory within the Toolkit's <filepath class="+ topic/ph sw-d/filepath " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="filepath:5;35:387">plugins/</filepath> directory.</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:13;36:8">The <filepath class="+ topic/ph sw-d/filepath " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="filepath:6;36:22">plugin.xml</filepath> file should look like this:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="codeblock:2;36:82">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;plugin id="<b class="+ topic/ph hi-d/b " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="b:1;37:19">my.unique.plugin.name</b>"&gt;
  
  &lt;require plugin="net.sourceforge.dita4publishers.epub"/&gt; 
  
&lt;/plugin&gt;</codeblock></p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:14;42:8">Where the bold text should reflect a unique name for this particular plugin.</p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:15;43:8">This plugin descriptor simply establishes a dependency on the Toolkit transformation type it overrides, e.g., the EPUB plugin. </p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:16;44:8">Assuming that you are deploying the plugin to the <filepath class="+ topic/ph sw-d/filepath " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="filepath:7;44:68">plugins/</filepath> directory and that your override template is at the root of its own plugin's directory, then the top-level transform should look like this:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="codeblock:3;44:238">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0"&gt;
  
  &lt;xsl:import href="../net.sourceforge.dita4publishers.epub/xsl/map2epub.xsl"/&gt;
  &lt;xsl:include href="my-html-overrides.xsl"/&gt;
  
&lt;/xsl:stylesheet&gt;</codeblock></p>
    <p class="- topic/p " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="p:17;54:8">With this plugin you can then specify the transformation within your plugin as the value of the <parmname class="+ topic/keyword pr-d/parmname " xtrf="C:\Users\PBentley\Downloads\dita4publishers-0.9.18\documentation\d4p-users-guide\epub-plugin\overriding-base-processing.xml" xtrc="parmname:4;54:114">args.xml</parmname> Ant parameter.</p>
 </conbody>
</concept>